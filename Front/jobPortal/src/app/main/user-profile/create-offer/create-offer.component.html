<div class="container">
  <form class="form" [formGroup]="offerForm" (ngSubmit)="onSubmit()">
    <h2>{{ isEditing ? 'Editar Oferta' : 'Nueva Oferta' }}</h2>

    <mat-form-field appearance="outline">
      <mat-label>Título de la oferta</mat-label>
      <input matInput formControlName="title" required />
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Descripción</mat-label>
      <textarea matInput formControlName="description" rows="4"></textarea>
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Localización</mat-label>
      <input matInput formControlName="localizacion" />
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Modalidad de trabajo</mat-label>
      <mat-select formControlName="modalidadTrabajo">
        <mat-option *ngFor="let modalidad of modalidadesTrabajo" [value]="modalidad">
          {{ modalidad }}
        </mat-option>
      </mat-select>
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Requisitos</mat-label>
      <textarea matInput formControlName="requisitos" rows="3"></textarea>
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Deseables</mat-label>
      <textarea matInput formControlName="deseables" rows="2"></textarea>
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Beneficios</mat-label>
      <textarea matInput formControlName="beneficios" rows="2"></textarea>
    </mat-form-field>

    <mat-divider></mat-divider>

    <h4>Información de la Empresa</h4>
    <div class="company-info">
      <img
        *ngIf="offerForm.get('company')?.value?.logo"
        [src]="offerForm.get('company')?.value?.logo"
        alt="Logo empresa"
      />
      <p><strong>{{ offerForm.get('company')?.value?.name }}</strong></p>
      <p>{{ offerForm.get('company')?.value?.web }}</p>
    </div>

    <div class="button-container">
      <button
        mat-raised-button
        class="publish-button"
        color="primary"
        *ngIf="!isEditing"
        type="submit"
      >
        Crear
      </button>

      <button
        mat-raised-button
        class="publish-button"
        color="accent"
        *ngIf="isEditing"
        type="button"
        (click)="updateCurrentItem()"
      >
        Guardar Cambios
      </button>

      <button
        mat-button
        class="catalogueButton"
        color="warn"
        type="button"
        (click)="isEditing ? cancelEditing() : onCancel()"
      >
        Cancelar
      </button>
    </div>
  </form>
</div>
